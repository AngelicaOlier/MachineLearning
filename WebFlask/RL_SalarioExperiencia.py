#py -m install flask 
#py -m flak run 
from flask import Flask, render_template, request
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt  #usar para la grafica
import io
import base64
from sklearn.linear_model import LinearRegression

app = Flask(__name__)
#Carga de datos DataSheet Experiencia VS Salario
data = {
    "Experiencia": [
  26.64677718793992, 79.23680339700681, 68.39818439489642, 96.06684654872127, 90.82238175598859, 11.01133281299865, 13.20631033573512, 53.31164928933116,
  42.8857264557294, 61.81097272742039, 75.79229183955188, 37.16222042594282, 50.72623075109004, 60.972418097188, 18.07828517952044, 52.46640877045729,
  72.07378758260425, 24.80924709821222, 59.28165884602178, 83.52475360951446, 94.93957594095534, 92.10565251006491, 90.9744361152365, 17.69406548892434,
  60.55295276525832, 33.52040843641825, 83.36867157875194, 46.53705902019525, 53.31748578838324, 36.89024497160558, 43.40502056355444, 46.04536828967912,
  88.29402352808793, 26.61177226682753, 26.01105365455749, 44.5114887097773, 87.59109292314193, 48.25285595894356, 68.95527295039346, 28.71759966053209,
  43.43336163784656, 18.33173460393171, 27.02361692242384, 90.44478320350792, 22.46409113600048, 72.52147185669497, 13.72159298490899, 22.95901519198124,
  49.63736269677739, 40.56825739565714, 53.26972262481785, 18.64970314146313, 87.78189288647141, 21.69870195465232, 78.83775423621174, 18.2775395637551,
  76.2544517766385, 47.0597295062615, 69.51769580914643, 79.24636507999017, 81.72948121349832, 12.951345456609, 32.76585070963933, 68.42470148349938,
  56.71588220131985, 32.90179706895823, 33.06594343549684, 92.83115570471976, 34.79008381128022, 48.18240032966172, 71.41061733648553, 34.82917909308885,
  49.53621143649508, 75.91387095946634, 25.44463977464275, 94.24351722877452, 84.69017810352688, 93.17092906428505, 72.30106320100785, 77.15704078296137,
  58.36466261371849, 87.07523651453879, 47.30343566723695, 84.94339124080976, 92.13892392137915, 66.39825888610665, 18.01156969795537, 26.19046612538743,
  30.74647158118315, 30.51519247226318, 73.47824666118919, 75.3873160699758, 59.72541431931636, 64.50236317496856, 37.0200096755364, 90.26474114027559,
  47.45898407019222, 33.53328057917295, 73.2621737427476, 63.98110320925606, 29.5881266177602, 37.38766102299737, 41.3497446856215, 96.9182291409674,
  92.5083697002396, 55.97340573157345, 23.77363227156186, 17.21383635204903, 10.70340842636706, 91.43746274745583, 52.77115864593674, 22.90050405010105,
  53.37417466784746, 68.61476020400076, 78.51153935543104, 92.96473925917967, 29.91390515467865, 37.03627302109848, 27.78872031358457, 46.43340329048844,
  68.20003189517405, 90.49569307308019, 23.46895810667356, 80.08472846920662, 93.74686564386788, 19.23874706758343, 79.67972588522454, 39.55143110634891,
  97.15752919581868, 96.73980519035014, 26.67502657588467, 70.74091153326519, 83.22504947609326, 32.01678128938369, 44.93287580980156, 47.45801730873735,
  13.05129175126618, 35.97338595965422, 48.32588929956204, 16.65478291935617, 45.48340906941655, 61.28667179833444, 73.37607316649925, 41.19464804358877,
  68.11960382856581, 94.68011940579586, 98.74041750248021, 79.84416955818487, 49.72115567551796, 11.96887782301735, 31.90552115862254, 91.7122914927459,
  23.05497418544924, 80.43879006571665, 69.70724026911559, 89.44790713105715, 38.65967404979581, 93.7235424462503, 12.43033959541949, 30.04711593641613,
  23.73906153303513, 59.3650250719779, 23.22158893905902, 42.33627509144884, 94.07800631218326, 49.37227657302976, 12.41520960680045, 72.0515240739571,
  65.95359485677162, 99.91215736278492, 18.55569809322983, 85.34855929490358, 58.66231058920282, 32.45374592325853, 30.89100653376002, 32.30592974958849,
  98.28422105193586, 88.83946631610219, 31.84957096601059, 63.9672742047633, 33.58190042833954, 89.95775301174429, 39.99035319795262, 74.61818787885257,
  20.53121502731633, 46.6732612737575, 20.69223230057146, 93.7014297837179, 57.20964994726913, 71.27446908283329, 98.21024812414977, 98.68524106420217,
  24.64832748385017, 68.76816612808754, 66.5553401681184, 56.41593432751441, 94.6805853330489, 40.86242450108417, 42.32686712269903, 91.10136855237727,
  13.20359776312456, 42.04102163531292, 33.41960683328128, 47.10745539456249, 25.66240853185449, 72.55291777360557, 37.25658434780151, 64.31169844361088,
  34.75373987939177, 26.78442686782137, 63.6966558437988, 45.18559983900735, 30.49450734821557, 68.10658858821532, 83.39566558755607, 65.90377367865162,
  26.57529494396959, 80.84374742297729, 87.83385617823365, 95.16758740339904, 48.8311479586991, 20.63605667399422, 40.2094419145116, 37.81283123714162,
  86.13700628844562, 93.2478655821428, 63.40148002738096, 69.31176048173367, 35.25467963873837, 62.83580752541091, 71.28437429589101, 36.97517007469988,
  41.29050160528094, 36.49995029460767, 76.53082008950938, 52.59952762742568, 83.74620455487792, 67.85571572321362, 38.16673458175795, 33.38038351257924,
  94.87408264105608, 83.97418616924426, 80.41183038507172, 74.53563064359585, 56.82901078261728, 18.76769647582858, 93.13993767705124, 62.95846259992685,
  11.72601599537046, 41.96355078419261, 72.04116970562623, 75.55925903210873, 64.31334487846108, 25.46121731881219, 83.88266242893772, 15.192228082339,
  12.54242290001733, 19.19649027799569, 13.30700254667765, 87.42399224117145, 84.5686519657226, 88.96109854184193, 97.69945174370008, 21.74727342743466,
  26.35427992649278, 24.36280345316935, 99.92904365195702, 32.95034332064108, 56.53128952670683, 52.58066497307358, 96.08131870690019, 82.58953050348471,
  77.30615163769824, 64.37880170842293, 36.26688912684106, 43.973409016754, 43.42960242539865, 47.8030091735051, 58.81686319455632, 37.8076918347877,
  58.73409154223742, 55.83711147674288, 58.14523825770547, 65.3412064803595, 30.90387240240512, 57.01433314997985, 12.96598953168639, 94.77713890524491,
  20.70727670863139, 63.80506455150329, 20.97220541221304, 90.87912021811434, 36.32264554801952, 82.34100934140034, 23.35853203046383, 56.13737234608112,
  79.97795133996318, 52.33420066164516, 48.55741905992207, 29.67356021605574, 11.09590093536884, 12.50615461322457, 81.28719548912416, 12.23598303172512,
  52.90471519418453, 14.49290055054085, 13.17890099831807, 61.02161260502938, 97.99584217840876, 82.28701896450559, 56.54891964678416, 57.51719009464811,
  29.77023458530187, 41.29017872357768, 11.62708288786059, 90.34944331758219, 88.86436265744379, 59.16118157263102, 50.75144629476403, 56.96451680230694,
  77.25574767150057, 46.60331880573661, 26.11625367412969, 99.7081179870799, 78.25506095454361, 32.04604566032845, 91.03847029984414, 67.54904546244134,
  54.52737970286006, 74.66559704284735, 84.02341483326911, 37.86332515862782, 30.06338216868923, 66.5850010366633, 48.97937425648028, 29.63109206853061,
  41.36330794370106, 31.44263944859689, 61.74634140014216, 30.83582076686682, 44.74771956055822, 26.61063553904004, 19.72007183445584, 67.56827548646312,
  20.64720791016072, 61.1646173080236, 99.22888834659666, 95.32602212064775, 46.26620006009859, 93.26903085341355, 50.10379839591202, 95.56329575869215,
  64.82062321067343, 55.80782959325448, 74.59537511338684, 47.39381109141637, 75.6805465407767, 36.64588052984857, 88.32921811090218, 42.77099862882311,
  69.63802431554376, 27.30597952611222, 63.05434584928668, 68.43875683316344, 42.00479925708613, 56.66104688733743, 84.55472400631771, 13.02554874731655,
  44.45469605346593, 74.16982508670452, 31.63133808912441, 31.28397233097589, 30.03931905539385, 90.37226096250537, 91.99596208897218, 94.78170608468537,
  45.63920790195436, 76.93374464164032, 68.29497000576455, 86.74056880936357, 70.21694671649746, 96.58227588440496, 71.17869226760045, 10.81405328669297,
  81.0896049672291, 28.0363107071242, 89.94355738654305, 16.53290958354852, 54.86852980171354, 37.46313220059648, 68.83633114941554, 96.24786005382902,
  77.22689812806334, 30.22652956398727, 31.8529909001287, 64.02919826858661, 67.56377992721075, 81.37700129922133, 13.91941435703509, 58.3412005460678,
  28.57708725366246, 86.78316870898139, 31.27507154942608, 27.66020048290515, 96.01071802027049, 98.10984289244873, 64.09876142595391, 24.52153962310281,
  11.70691919930639, 59.14117792509651, 51.62993581343803, 88.5576158156404, 21.85548080118662, 64.39927102423968, 26.12682369317054, 86.50444544892731,
  84.6033629575586, 66.06049773825407, 39.93564492917125, 70.7748371949509, 84.67183151890876, 91.55693774257, 29.83067808183865, 64.14738731761364,
  56.23493771742613, 27.8641048014373, 44.20033693285873, 18.96943137752295, 83.42968094995447, 37.81524206788571, 20.89288178070837, 49.45659927944517,
  68.0135332474135, 42.61553448473801, 22.85224852365884, 50.4952262388606, 72.45637250684766, 89.22682946939315, 83.6662439827701, 32.21970502673913,
  67.88330263944121, 90.44287895867035, 12.14483884581896, 42.47151913426527, 40.42722472284112, 56.39483881432955, 81.7217692137552, 39.8588701238733,
  77.73510115844748, 37.55553263369364, 82.9129847630886, 12.35849824509604, 43.14015642567374, 31.35587939829371, 34.51050394328969, 66.76133042485364,
  80.73634734876194, 10.47883962841212, 12.27312031046165, 83.0538405442091, 79.34717767099788, 61.3288800384276, 99.08625275895577, 21.97151534654209,
  63.499850011753, 29.05666810553453, 73.89451395322982, 99.82736484339623, 71.44722633654786, 62.06336386104576, 20.23539885945029, 55.35630733254857,
  68.61597367328847, 34.76103915758907, 10.86921976818713, 33.98388793342075, 93.00523041809691, 71.06049695842154, 73.06599056641946, 61.08075769200843,
  83.87470153245576, 95.22540857898306, 62.74228839701617, 87.99455909193647, 63.97278313440276, 92.34635812986879, 77.11288737492832, 90.11992012421035,
  82.41255241464992, 93.16529305120368, 33.26277281165861, 11.89656222324705, 30.73324040718373, 62.41791359032188, 59.10542844674036, 85.64097845890484,
  #93.4506690450037, 69.11652931222054, 16.91442835052237, 42.8816015751865
    ],
    "Salario": [
  195.3259967749613, 526.4597230688573, 464.5626158897149, 626.4898042818137, 598.0869409917823, 103.6888447596696, 116.1463077775162, 356.6207767402571,
  299.6728276889304, 409.9008271055835, 493.1715029687339, 259.1956534546287, 339.0422863459307, 405.3817580608932, 148.5280358498033, 359.5759001260881,
  474.6114276751726, 188.5194980622316, 403.4515480582596, 549.2469365980141, 616.7891657455448, 595.0261822026488, 588.4806305611368, 151.7420818669264,
  401.7591347715638, 238.2516167905716, 543.8783599548937, 331.294801567407, 365.9778200751661, 258.0567646840586, 294.2861315333149, 319.4328510725392,
  571.4576114988105, 207.5231799503757, 191.4051708318328, 309.8455149204522, 577.9488246501927, 334.6621417287703, 456.4441704414735, 207.1051966442409,
  305.3199519397072, 140.577404142609, 198.3968323767114, 594.696089535013, 174.3096571654494, 483.5087745679539, 110.9467846755986, 167.0965371133551,
  335.9365611474415, 280.1688900568775, 359.1060863812302, 148.0230791563517, 585.6644934688813, 168.8878292844562, 522.4585621888717, 144.1994645125829,
  499.2715758440623, 321.2580348419982, 462.4159407384858, 524.3031262138107, 538.9014512331117, 118.0773649107678, 236.3233934394738, 456.1210340254814,
  390.164034868927, 236.1365994039987, 239.1157643002676, 610.3426823757744, 247.4813018815368, 325.5580848829759, 475.4045295226858, 246.6907133730043,
  338.0008414043144, 500.4548491427272, 195.3565131649578, 615.2625611447642, 558.0731541228829, 615.3083850593247, 474.4292075231516, 509.0344828585734,
  394.5587725599958, 564.4401878658728, 324.8010849919719, 561.8292197535561, 596.0242186535935, 446.5569799937715, 134.7357549440278, 191.624009212624,
  226.5180610114292, 215.7768089675486, 482.9482427476019, 493.2025721834623, 393.2464273129889, 431.5104476213452, 255.1520525100244, 594.3091378466407,
  331.3848565876425, 237.2893810484882, 480.810659453336, 427.406754257705, 218.5354930350622, 257.1991978051489, 290.6858918806822, 630.309740671008,
  608.3139788969539, 380.4534866220288, 172.0448323903174, 139.4361609150256, 104.9810416229091, 602.0756669600944, 367.0367049098235, 175.4419711891106,
  360.873455960284, 459.6913641671611, 507.9627876057084, 612.4083548433725, 219.0301572033925, 252.4267920943168, 199.7674921864218, 320.4401639362258,
  442.7312848954743, 585.6384882313182, 180.9141164611339, 523.9355509388129, 609.6791216606006, 156.6550304296748, 515.7670703406328, 264.1344587907506,
  628.2623198575151, 631.7420142239399, 199.8385103393927, 470.6055091833858, 543.4256471892797, 224.1055911188193, 311.5181768447729, 314.6253786210888,
  111.0288395428137, 251.7660162735649, 327.4404073454826, 142.7657568603226, 321.2219192619127, 409.2134312586046, 496.215141935395, 291.6856897514322,
  446.3017945466499, 608.1301014321004, 652.9811927178102, 518.0721219119058, 343.2770047109797, 100.8112807458348, 227.7018845087262, 598.7712931258642,
  179.1393001320833, 524.4240306923203, 463.877997150944, 578.9801916818736, 270.4919585839814, 611.830664303574, 113.2519572559556, 217.7249700692245,
  184.0298055135276, 401.3005071339238, 182.9957556494685, 288.8743373614458, 613.5028758387921, 328.7555912015839, 109.3642430548297, 474.3820156370641,
  440.3680651184542, 640.747571320518, 140.235199947462, 554.9815788978675, 389.5758535924164, 229.7672938558666, 224.0054802383747, 235.4403081986723,
  644.2881459060956, 580.2052697516817, 236.1211950273621, 429.4314170609163, 235.8272067939305, 597.249856901225, 280.7408640077718, 496.0292792050116,
  151.2860205505951, 317.4516991516161, 162.0554131086937, 617.5216362693994, 384.0435971238497, 466.2133887752813, 642.3102825997885, 644.3467765767078,
  185.1516228449252, 460.9827436719197, 442.4558609558223, 372.2646476734874, 620.5890020981774, 278.2264098540265, 296.1264047346094, 596.4815666572731,
  123.2729844105332, 294.8552723609213, 233.6337222240606, 326.392119877935, 190.8882080210613, 476.9433603216316, 260.6617379779063, 424.8413527282402,
  243.4138908138724, 198.6276688541611, 428.7865922012885, 309.6018326871834, 219.5391660529115, 454.737869130017, 553.1883196856293, 439.7314419854642,
  200.5729237758619, 527.3002885245395, 583.2604356039585, 617.0085775947886, 336.2399151122028, 169.6634493624337, 282.5787843177199, 261.4657550059429,
  562.6384349629004, 612.5442277180755, 423.0011059629853, 455.6101422414387, 242.7986407642333, 417.9659752608119, 469.120046158041, 256.5233159718935,
  290.5199619100281, 263.3177394147715, 503.9219426113565, 360.6593959932473, 553.4462881994234, 455.2393920088134, 267.9576388316714, 242.3223464478637,
  618.293477808522, 543.3571748736514, 525.8288767224566, 502.1820939654193, 382.906075394952, 144.7863850791123, 604.1765042572971, 421.347150499709,
  104.8513015872867, 288.755173821635, 472.6640769353017, 506.0508964063142, 432.3721702217703, 189.798117623928, 550.0928952067037, 132.5610518240475,
  117.1646519668939, 149.175275005032, 121.6399044051179, 564.3003678165179, 554.0081893459152, 593.0873727657438, 644.0337405929164, 157.8272781668383,
  196.623228883931, 184.1853911787553, 644.0722330904675, 243.7157401763558, 375.5407952802612, 360.6888355331305, 628.995874647217, 537.2144540434899,
  505.5156678770498, 431.1986396263424, 257.0894404783474, 304.5574008677061, 307.638622224971, 341.9858749077511, 391.3335004985853, 257.5909923779869,
  391.1399135788076, 378.4702551108821, 382.7759464313652, 435.489132309263, 228.0488828190374, 382.7541029393443, 122.8098275209233, 611.4583856604355,
  163.1451273702735, 424.5393920384009, 165.0439435635562, 588.94117830333, 254.6093869047445, 541.5689388183768, 174.8394315684952, 366.6050808071974,
  530.2533981597333, 347.2246886038604, 338.3396224629061, 219.0681684527816, 103.1304878908808, 108.5882089438281, 533.3605086894613, 106.5309360929631,
  365.7343391400292, 112.3210658294821, 117.2945530889581, 410.3715729722917, 634.4625279101873, 535.8202293057808, 385.3861291297497, 385.1539976723225,
  213.9867984625147, 289.6899408692569, 102.8575378446023, 589.6683237893321, 576.557768756052, 404.7322550163405, 343.4318129049528, 383.0295493669273,
  511.7773175075527, 315.7547579542153, 194.243943624351, 656.5088492697403, 516.8451366212191, 240.3783661590603, 599.667190612563, 452.3935256015656,
  374.8158939510186, 496.9821502626783, 549.6806077450249, 273.23536520136, 222.53792589951, 444.8994869037214, 335.137201758784, 219.3345575396257,
  280.3185005575335, 224.8405746830491, 415.048952642636, 230.7175796729693, 306.5579103998152, 192.8151204234246, 148.9434942932446, 442.0329152788368,
  158.7160383931247, 405.9577187547013, 636.8031246269131, 611.9655782466962, 322.4710249461749, 607.5412600413861, 336.8293910724401, 619.9859952248246,
  430.403194561197, 383.9690665500056, 494.5662454978435, 328.5245950874508, 495.2034154022679, 259.3075851458938, 581.1069454036963, 302.9716528091632,
  461.227137580478, 204.5552138855762, 422.7260226166116, 448.6014518775555, 294.0742482918792, 381.3317126114639, 544.1190955085127, 101.5082771955084,
  306.8409447910914, 489.290078569618, 227.2227030375887, 223.1483363188922, 217.232779845347, 589.6365466516469, 608.3501221750788, 615.7019472028951,
  322.048858944709, 502.1420436796419, 464.5296127927985, 570.0669038036859, 463.1567975934019, 630.4450517892344, 472.3160634881165, 103.8214417148943,
  521.5283558819996, 208.6874747677375, 585.7500771873838, 138.0520838924696, 377.3516004020281, 268.14370665989, 457.5598011834056, 628.7852458365724,
  503.9771717503185, 215.5925802915712, 219.5214621594198, 427.6437577121198, 443.3601756608621, 539.4644723638111, 113.6427372084999, 392.6709597687167,
  207.5445494505677, 567.0414395825837, 225.6859406996314, 203.899350543436, 623.3618795589268, 634.2349030011713, 435.2749252008734, 182.592133143921,
  110.7080119698447, 387.4880286731719, 345.6485983642034, 586.2252718931045, 169.173742159118, 422.5759600036953, 189.4666524491824, 559.283175079292,
  558.6258896081143, 439.6648754679803, 273.1763615766964, 471.500540608592, 558.3846047934672, 592.7301634303974, 217.1998383268435, 423.3415338806257,
  385.685741251871, 205.7183913773708, 305.3855866622029, 149.4678169598199, 538.7735158134587, 265.8237517754606, 164.060822721236, 341.6910613078685,
  454.2436195111118, 302.3379978304415, 174.4826007148989, 350.4953962250439, 483.2440080711878, 578.9623785512852, 551.2459619710213, 232.8138671292732,
  458.9747994801311, 590.9024851211431, 109.3130687273106, 288.4006145661099, 276.5162864515062, 375.2419799410471, 532.5026636897, 285.6962865212324,
  512.9914120463443, 264.6958109901581, 540.0377185330394, 113.9117466356345, 307.7585284583631, 233.0492292736344, 235.9169122893234, 442.3262590665226,
  531.4474468023835, 98.63595611067224, 112.097265845763, 551.2406778134329, 521.4359609395981, 415.0847339137103, 645.5079148572665, 170.826800358633,
  424.6630216796403, 215.6038927962091, 483.566523324165, 641.8741745953806, 474.9076839889505, 410.4973510174668, 156.299393564182, 369.6211260714031,
  450.6014359070973, 240.602913674151, 102.3213341777338, 238.0525939670478, 608.1694823383398, 469.8903729725446, 483.8835390513256, 404.466126830634,
  555.6608593216822, 614.6226071384699, 419.0831535801058, 567.6767236825367, 423.8885506789958, 603.6952491568726, 510.3939330937972, 575.2875968915129,
  537.4842990269192, 609.9813352818002, 244.3359372351602, 108.0881678898106, 222.3471512176224, 422.4238039543338, 399.1003518545234, 559.3589278576845,
  #614.483426599569, 452.1083106990777, 138.1693211236577, 296.8508492671526
  ]
}

df = pd.DataFrame(data)

X = df[["Experiencia"]]
y = df["Salario"]
model = LinearRegression()
model.fit(X, y)

def generate_graph():
    plt.figure(figsize=(8, 5))
    plt.scatter(df["Experiencia"], df["Salario"], color='blue', label="Datos reales")
    plt.plot(df["Experiencia"], model.predict(X), color='red', linewidth=2, label="Línea de regresión")
    plt.xlabel("Experiencia")
    plt.ylabel("Salario")
    plt.title("Regresión Lineal: Experiencia vs Salario")
    plt.legend()
    plt.grid(True)
    
    buffer = io.BytesIO()
    plt.savefig(buffer, format="png")
    buffer.seek(0)
    image_base64 = base64.b64encode(buffer.getvalue()).decode("utf-8")
    plt.close()
    return image_base64

if __name__ == '_main_':
    app.run(debug=True)